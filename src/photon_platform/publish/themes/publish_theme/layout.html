{#
   Publish Theme layout.html
   Based on the semantic structure of grav-theme-photon
#}
{%- set url_root = pathto('', 1) %}
{%- if url_root == '#' %}{% set url_root = '' %}{% endif %}
{%- set lang_attr = 'en' if language == None else (language | replace('_', '-')) %}

<!DOCTYPE html>
<html lang="{{ lang_attr }}">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ title|striptags|e }} &mdash; {{ docstitle|e }}</title>
  <link rel="stylesheet" href="{{ pathto('_static/css/publish.css', 1) }}" type="text/css" />
  <link rel="stylesheet" href="{{ pathto('_static/pygments.css', 1) }}" type="text/css" />
  {%- for css_file in css_files %}
    {{ css_tag(css_file) }}
  {%- endfor %}
</head>
<body class="photon">

  <header>
    <div class="logo">
      <a href="{{ pathto(master_doc) }}">
        {%- if logo_url %}
          <img src="{{ logo_url }}" class="logo" alt="Logo"/>
        {%- else %}
          <h1>{{ project }}</h1>
        {%- endif %}
      </a>
    </div>
    <nav>
      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
        {#- Main navigation from toctree -#}
        {%- set toctree = toctree(maxdepth=theme_navigation_depth|int,
                                  collapse=theme_collapse_navigation|tobool,
                                  includehidden=theme_includehidden|tobool,
                                  titles_only=theme_titles_only|tobool) %}
        {%- if toctree %}
          {{ toctree }}
        {%- endif %}
      </div>
    </nav>
    <div class="motto">
      {#- Placeholder for motto/tagline -#}
    </div>
  </header>

  <main>
    {% include "breadcrumbs.html" %}
    <div role="main" class="document">
      {% block body %}{% endblock %}
    </div>
  </main>

  <div class="asides">
    <aside>
      <h3>Search</h3>
      {%- include "searchbox.html" %}
    </aside>
    <aside>
      {#- Recent posts from ABlog -#}
      {%- include "recentposts.html" %}
    </aside>
    <aside>
      {#- Archives from ABlog -#}
      {%- include "archives.html" %}
    </aside>
  </div>

  <footer>
    {%- if (theme_prev_next_buttons_location == 'bottom' or theme_prev_next_buttons_location == 'both') and (next or prev) %}
      <div class="rst-footer-buttons" role="navigation" aria-label="{{ _('Footer') }}">
        {%- if prev %}
          <a href="{{ prev.link|e }}" class="btn btn-neutral float-left" title="{{ prev.title|striptags|e }}" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> {{ _('Previous') }}</a>
        {%- endif %}
        {%- if next %}
          <a href="{{ next.link|e }}" class="btn btn-neutral float-right" title="{{ next.title|striptags|e }}" accesskey="n" rel="next">{{ _('Next') }} <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        {%- endif %}
      </div>
    {%- endif %}
    <hr/>
    <div role="contentinfo">
      <p>
        {%- if show_copyright %}
          &copy; Copyright {{ copyright }}.
        {%- endif %}
      </p>
    </div>
  </footer>

  {#- JavaScript #}
  {%- block scripts %}
    {%- for scriptfile in script_files %}
      {{ js_tag(scriptfile) }}
    {%- endfor %}
    <script src="{{ pathto('_static/js/theme.js', 1) }}"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable({{ 'true' if theme_sticky_navigation|tobool else 'false' }});
        });
    </script>
  {%- endblock %}

</body>
</html>